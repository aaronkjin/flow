# Phase 7.1: Design Overhaul — Apple-Level Aesthetic

## Goal

Transform Action's UI from a "vibe coded" prototype into a premium, Apple-quality product. The design should feel inevitable, minimalistic, and quietly confident — like no other design was ever possible.

## Design Philosophy

- **Simplicity is architecture, not decoration.** Every element must justify its existence.
- **Whitespace is a feature.** Crowded interfaces feel cheap. Breathing room feels premium.
- **Hierarchy drives everything.** Every screen has one primary action. Make it unmissable.
- **Consistency is non-negotiable.** The same component looks and behaves identically everywhere.
- **The details users never see should be as refined as the ones they do.**

## Typography System

### Fonts

- **Headings/Titles**: `Libre Baskerville` (Google Fonts) — serif, elegant, literary. CSS variable: `--font-heading`.
- **Body/UI**: `Inter` (Google Fonts) — clean sans-serif, optimized for screens. CSS variable: `--font-sans`.
- **Monospace**: `Geist Mono` (keep existing) — for code, JSON, technical content. CSS variable: `--font-mono`.

### Heading Hover Effect

When the user hovers over ANY text rendered in Baskerville (headings, titles, nav wordmark), the font should smoothly transition to italic:

```css
.font-heading {
  font-family: var(--font-heading);
  font-style: normal;
  transition: font-style 0.2s ease;
}
.font-heading:hover {
  font-style: italic;
}
```

### Type Scale (suggested)

- Page titles: `text-2xl` Baskerville, `font-normal` (weight 400, the serif carries the weight)
- Section titles / card headers: `text-lg` Baskerville
- Sidebar nav labels: `text-sm` Inter, `font-medium`
- Body text: `text-sm` Inter
- Captions / muted text: `text-xs` Inter
- Monospace / code: `text-xs` or `text-sm` Geist Mono

## Color Philosophy

Restrain color. Apple uses color sparingly — it's a signal, not decoration.

- **Background**: Pure white (`#ffffff`) or the faintest warm gray
- **Text**: Deep charcoal (not pure black) — something like `#1d1d1f` (Apple's text color)
- **Borders**: Ultra-subtle, almost invisible — `rgba(0,0,0,0.06)` or similar
- **Accent**: One primary blue, used sparingly for primary actions and links
- **Status colors**: Muted, not screaming:
  - Success: soft sage green (not neon)
  - Warning/Flag: warm amber (not bright yellow)
  - Error/Destructive: muted rose (not fire-engine red)
  - Info/Running: calm blue
  - Neutral: warm gray
- **Node type colors** on the canvas: softened tints rather than bold colored borders

## Component Design Principles

### Cards

- Remove or drastically soften shadows
- Use ultra-subtle borders (1px, very light gray)
- Generous internal padding (p-6 minimum)
- No colored borders on cards

### Buttons

- Primary: subtle, not chunky. Consider a text-weight CTA style (like Apple's "Learn more >" links) for secondary actions
- Ghost buttons should feel almost invisible until hovered
- Increase border-radius for a softer feel

### Tables

- More row height / padding
- Remove heavy header backgrounds
- Let typography and spacing create structure, not background colors

### Badges / Status Indicators

- Pill-shaped, muted background colors
- Smaller, lighter — they inform, they don't shout

### Sidebar

- Clean, airy navigation
- The Action wordmark in Baskerville
- Active state: subtle background + slight font weight change, not a bold highlight
- Review badge: small, understated dot or count

### Workflow Editor Nodes

- Softer borders (1px, tinted rather than bold colored)
- White or near-white backgrounds
- Subtle shadow on hover only
- Type icons: lighter, more refined (consider stroke width consistency)
- The step type color should be a subtle accent, not the dominant visual

### Workflow Editor Palette & Config Panel

- Clean, airy spacing
- Category headers: Baskerville, small caps or uppercase letter-spacing
- Draggable items: minimal chrome, let text and icon speak

### Trace Timeline

- Thinner connecting line
- Smaller, more refined dot indicators
- More whitespace between events
- Collapsed by default feels clean; expanded shows detail without clutter

### Review Panel

- The judge assessment confidence bars: thin, refined, with subtle color fills
- Action buttons: clear hierarchy — one primary (Approve), others secondary
- The overall layout should feel like reading a document, not using a dashboard

## Files to Modify

### Foundation (modify first)

1. `src/app/globals.css` — new CSS variables, font declarations, utility classes, color token adjustments, hover transition styles
2. `src/app/layout.tsx` — replace Geist font imports with Libre Baskerville + Inter, apply CSS variables

### Layout

3. `src/components/layout/sidebar.tsx` — refined nav, Baskerville wordmark, subtle active states
4. `src/components/layout/header.tsx` — Baskerville titles, refined breadcrumbs

### Pages

5. `src/app/page.tsx` — dashboard: refined stat cards, cleaner table, more whitespace
6. `src/app/workflows/page.tsx` — workflow list: refined table, Baskerville headings
7. `src/app/runs/page.tsx` — run list: cleaner filter, refined table
8. `src/app/runs/[runId]/page.tsx` — run detail: more breathing room, refined status section
9. `src/app/review/page.tsx` — review queue: cleaner table, refined badges
10. `src/app/review/[runId]/page.tsx` — review detail: refined header

### Shared Components

11. `src/components/run/run-status-badge.tsx` — muted colors, pill shape
12. `src/components/run/run-list-table.tsx` — refined table styling
13. `src/components/run/run-progress.tsx` — thinner progress bar, subtler step pills
14. `src/components/trace/trace-timeline.tsx` — refined timeline, thinner lines, more space
15. `src/components/trace/trace-event-detail.tsx` — cleaner detail views
16. `src/components/review/review-panel.tsx` — refined layout, clear button hierarchy
17. `src/components/review/judge-assessment.tsx` — thinner bars, refined scores display
18. `src/components/review/output-editor.tsx` — cleaner editor appearance

### Workflow Editor

19. `src/components/workflow-editor/toolbar.tsx` — refined toolbar, Baskerville workflow name
20. `src/components/workflow-editor/block-palette.tsx` — airy spacing, refined category headers
21. `src/components/workflow-editor/config-panel.tsx` — cleaner forms, more whitespace
22. `src/components/workflow-editor/workflow-canvas.tsx` — refined canvas background
23. `src/components/workflow-editor/nodes/trigger-node.tsx` — softened node design
24. `src/components/workflow-editor/nodes/llm-node.tsx` — softened node design
25. `src/components/workflow-editor/nodes/judge-node.tsx` — softened node design
26. `src/components/workflow-editor/nodes/hitl-node.tsx` — softened node design
27. `src/components/workflow-editor/nodes/connector-node.tsx` — softened node design
28. `src/components/workflow-editor/nodes/condition-node.tsx` — softened node design
29. `src/components/workflow-editor/edges/workflow-edge.tsx` — refined edge appearance

## Constraints

- **NO functionality changes.** Every feature, every API call, every state flow must remain identical.
- **NO component API changes.** Props, exports, and imports stay the same.
- All values should reference CSS variables or Tailwind utility classes — no hardcoded one-off values.
- The workflow editor must remain fully functional: drag-and-drop, node selection, edge creation, config editing, save/run.
- Mobile responsiveness must be preserved or improved.

## Verification

- [x] `npx tsc --noEmit` passes
- [x] `npm run lint` passes
- [x] All pages render correctly with new typography
- [x] Baskerville hover → italic works on all headings
- [x] Sidebar navigation works with refined styling
- [x] Workflow editor: drag, connect, configure, save, run all work
- [x] Review panel: approve, edit, reject all work
- [x] Status badges have refined, muted colors
- [x] Overall feel: quiet, confident, minimal — like an Apple product

## Implementation Notes (What Was Actually Built)

### Unified Page Layouts
- **Header component** (`header.tsx`) extended with `actions?: ReactNode` and `badge?: ReactNode` props. Title + badge sit in a flex row; actions pushed right.
- **Workflows page** and **Review page** switched from `max-w-5xl mx-auto py-12 px-8` to `<Header>` + `p-8 space-y-6`, matching Dashboard/Runs. All 4 pages now share the same layout pattern.
- Workflow table rows made clickable (navigate to editor on click).

### Dashboard Stat Cards
- Removed decorative icons from card corners.
- Title bumped to `text-sm font-medium`, number to `text-4xl` Baskerville.
- "Total Runs" and "Success Rate" cards have `<Separator>` + sub-metrics row (Running/Completed/Failed).
- Cards rendered explicitly (not mapped from generic array) for per-card customization.

### Workflow Actions — Dropdown Menu
- Installed `dropdown-menu` via shadcn CLI (radix-ui already a dependency).
- Replaced bare Pencil + Trash2 icon buttons with a single `MoreHorizontal` (…) trigger opening a `DropdownMenu` with "Edit workflow" and "Delete workflow" items.

### Workflow Description Input
- Toolbar now exposes a description `<input>` below the name input, wired to `workflowDescription` / `setWorkflowDescription` from the `useWorkflow` hook via `handleDescriptionBlur`.

### Runs Table — Actions Column Removed
- Removed the redundant Actions/Eye column from `run-list-table.tsx`. Table now has 4 columns (Workflow Name, Status, Started, Duration). Row click already handles navigation.

### Toolbar Premium Polish
- Title and description inputs are now plain `<input>` elements with no border/background — inline-editable text, not rounded boxes on white.
- Auto-layout, Delete, Save buttons use `variant="ghost"` with `text-muted-foreground` instead of bordered outline buttons.

### Orange Accent System
- **Primary action buttons** (Run, New Workflow, Create Your First Workflow, Start Run) all use `bg-orange-500 hover:bg-orange-600 text-white font-heading` — Baskerville font, orange fill.
- **Dashboard quick action arrows** turn orange on hover via `group-hover:text-orange-500` on the `ArrowRight` icon.

### Config Panel Refinements
- Panel background changed from plain white to `bg-muted/30` for visual separation from canvas.
- All form fields (`Input`, `Textarea`, `SelectTrigger`) use `bg-muted/50 border-transparent` — soft gray fill that transitions to standard ring on focus. Eliminates the "white box on white panel" problem.
- All field labels (`<Label>`) use `font-heading` (Baskerville) for a premium typographic feel.
- Empty state redesigned: circular icon badge + "No node selected" / "Click a node on the canvas to take *Action*" copy.

### React Flow Canvas
- `proOptions={{ hideAttribution: true }}` removes the "React Flow" watermark.
- `showInteractive={false}` removes the lock button from controls.
- Custom CSS in `globals.css` styles `.react-flow__controls`: rounded container, soft border + shadow, 28px buttons, muted-foreground icons that darken on hover.

### Branded Empty States
- All empty/placeholder states incorporate the word *Action* (capital A, `font-heading italic`):
  - Review: "…it is time for you to take *Action*."
  - Workflows: "…and put it into *Action*."
  - Dashboard/Runs: "…Put a workflow into *Action*."
  - Config panel: "Click a node on the canvas to take *Action*"

### Files Modified
1. `src/components/layout/header.tsx` — `actions`/`badge` props
2. `src/app/workflows/page.tsx` — layout, dropdown menu, row click, orange button
3. `src/app/review/page.tsx` — layout alignment, branded empty state
4. `src/app/page.tsx` — stat card redesign, branded empty state, orange hover arrows
5. `src/components/ui/dropdown-menu.tsx` — new (shadcn CLI)
6. `src/components/workflow-editor/toolbar.tsx` — inline inputs, ghost buttons, orange Run
7. `src/components/run/run-list-table.tsx` — removed Actions column, branded empty state
8. `src/components/workflow-editor/config-panel.tsx` — bg tint, field styling, Baskerville labels, branded empty state
9. `src/components/workflow-editor/workflow-canvas.tsx` — hide attribution, styled controls
10. `src/app/globals.css` — React Flow control overrides
